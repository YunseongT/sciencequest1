<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ê¸°ì˜ ì´ìš© íƒí—˜ ê²Œì„ (ì‹¬í™” í•™ìŠµí¸)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            touch-action: manipulation;
        }
        .game-bg {
            background: linear-gradient(to bottom, #4A5568, #E2E8F0); /* ì–´ë‘ìš´ íšŒìƒ‰ì—ì„œ ë°ì€ íšŒìƒ‰ìœ¼ë¡œ */
            transition: background 1s ease;
        }
        .game-card, .form-card, .results-card {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .option-btn { transition: all 0.3s ease; }
        .option-btn:hover { transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .option-btn.correct { background-color: #2ecc71; color: white; transform: scale(1.05); }
        .option-btn.incorrect { background-color: #e74c3c; color: white; }
        .option-btn:disabled { opacity: 0.7; cursor: not-allowed; }
        .achievement-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 700;
            color: white;
            transition: all 0.3s ease;
        }
        .badge-earned { background-color: #f39c12; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .badge-not-earned { background-color: #bdc3c7; }
        #tip-modal {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
    </style>
</head>
<body class="game-bg">

    <!-- ì‹œì‘ í™”ë©´ -->
    <div id="start-screen" class="min-h-screen w-full flex items-center justify-center p-4">
        <div class="form-card w-full max-w-md rounded-2xl p-8 shadow-lg text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">ì „ê¸°ì˜ ì´ìš© íƒí—˜</h1>
            <p class="text-gray-600 mb-6">ì„±ì·¨ê¸°ì¤€ì„ í™•ì¸í•˜ë©° ì „ê¸°ì˜ ì›ë¦¬ë¥¼ ë°°ì›Œë³´ì„¸ìš”!</p>
            <button id="start-game-btn" class="w-full bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-transform duration-200 hover:scale-105">
                íƒí—˜ ì‹œì‘í•˜ê¸°
            </button>
        </div>
    </div>

    <!-- ê²Œì„ í™”ë©´ -->
    <div id="game-screen" class="hidden min-h-screen w-full flex items-center justify-center p-4 relative">
        <div class="game-card w-full max-w-3xl rounded-2xl p-6 md:p-8 shadow-lg text-center">
            <div class="flex justify-between items-center mb-4">
                <div class="flex gap-3">
                    <span class="text-3xl cursor-pointer" onclick="showElectricityInfo('circuit')">ğŸ’¡</span>
                    <span class="text-3xl cursor-pointer" onclick="showElectricityInfo('connection')">ğŸ”—</span>
                    <span class="text-3xl cursor-pointer" onclick="showElectricityInfo('electromagnet')">ğŸ§²</span>
                    <span class="text-3xl cursor-pointer" onclick="showElectricityInfo('safety')">ğŸ”Œ</span>
                </div>
                <div id="progress" class="font-bold text-gray-700"></div>
                <div id="main-icon" class="text-5xl cursor-pointer transition-transform duration-300 hover:scale-110" onclick="showTip()">âš¡ï¸</div>
            </div>
            
            <p id="achievement-standard" class="text-sm font-bold text-indigo-600 mb-2"></p>
            <h2 id="question" class="text-xl md:text-2xl font-bold text-gray-800 mb-6 min-h-[6rem] flex items-center justify-center"></h2>
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            <p id="explanation" class="mt-4 text-gray-700 bg-indigo-100 p-3 rounded-lg min-h-[5rem] flex items-center justify-center"></p>
            <button id="next-btn" class="hidden mt-6 w-full bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700">ë‹¤ìŒ ë¬¸ì œ</button>
        </div>
        <!-- íŒ ëª¨ë‹¬ -->
        <div id="tip-modal" class="hidden absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center p-4 opacity-0 -translate-y-4">
            <div class="bg-white p-6 rounded-lg shadow-xl max-w-md text-center">
                <h3 class="text-xl font-bold mb-2">í•µì‹¬ íŒ! ğŸ’¡</h3>
                <p id="tip-content"></p>
                <button onclick="closeTip()" class="mt-4 bg-gray-300 px-4 py-2 rounded-lg">ë‹«ê¸°</button>
            </div>
        </div>
    </div>
    
    <!-- ê²°ê³¼ í™”ë©´ -->
    <div id="results-screen" class="hidden min-h-screen w-full flex items-center justify-center p-4">
        <div class="results-card w-full max-w-2xl rounded-2xl p-8 shadow-lg text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">íƒí—˜ ê²°ê³¼ ë³´ê³ ì„œ</h1>
            <div id="achievements-container" class="space-y-4 my-6"></div>
            <p id="result-message" class="font-bold text-xl my-4"></p>
            <button id="restart-btn" class="w-full bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700">ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°</button>
        </div>
    </div>

    <script>
        // --- 1. ì§ˆë¬¸ ë°ì´í„°ë² ì´ìŠ¤ (ì„±ì·¨ê¸°ì¤€ë³„ êµ¬ì„±) ---
        const allQuestions = [
            // [6ê³¼06-01] ì „ê¸° íšŒë¡œ êµ¬ì„± ë° ìŠ¤ìœ„ì¹˜ ê¸°ëŠ¥ (4ë¬¸ì œ)
            { standard: "6-06-01", question: "ì „êµ¬ì— ë¶ˆì´ ì¼œì§€ê²Œ í•˜ë ¤ë©´ ë°˜ë“œì‹œ í•„ìš”í•œ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì „ì§€, ì „ì„ , ìŠ¤ìœ„ì¹˜", "ì „êµ¬, ìì„, ìŠ¤ìœ„ì¹˜", "ì „ì§€, ì „ì„ , ì „êµ¬", "ì „êµ¬, ì „ì„ , ìì„"], answer: 2, explanation: "ì „êµ¬ì— ë¶ˆì´ ì¼œì§€ë ¤ë©´ ì „ê¸°ë¥¼ ê³µê¸‰í•˜ëŠ” 'ì „ì§€', ì „ê¸°ê°€ íë¥´ëŠ” ê¸¸ì¸ 'ì „ì„ ', ë¹›ì„ ë‚´ëŠ” 'ì „êµ¬'ê°€ ëŠê¹€ ì—†ì´ ì—°ê²°ëœ 'ì „ê¸° íšŒë¡œ'ê°€ ë§Œë“¤ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤." },
            { standard: "6-06-01", question: "ì „ê¸° íšŒë¡œì—ì„œ ìŠ¤ìœ„ì¹˜ì˜ ì—­í• ë¡œ ê°€ì¥ ì˜¬ë°”ë¥¸ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì „ê¸°ë¥¼ ë” ê°•í•˜ê²Œ ë§Œë“ ë‹¤", "ì „ê¸°ê°€ íë¥´ëŠ” ê¸¸ì„ ì—°ê²°í•˜ê±°ë‚˜ ëŠëŠ”ë‹¤", "ì „ê¸°ì˜ ë°©í–¥ì„ ë°”ê¾¼ë‹¤", "ì „ê¸°ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤"], answer: 1, explanation: "ìŠ¤ìœ„ì¹˜ëŠ” ì „ê¸° íšŒë¡œë¥¼ ì—°ê²°í•˜ì—¬ ì „ê¸°ë¥¼ íë¥´ê²Œ í•˜ê±°ë‚˜(ë‹«íŒ íšŒë¡œ), ëŠì–´ì„œ íë¥´ì§€ ì•Šê²Œ(ì—´ë¦° íšŒë¡œ) í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤." },
            { standard: "6-06-01", question: "ë‹¤ìŒ ì¤‘ ì „ê¸°ê°€ ì˜ í†µí•˜ì§€ ì•ŠëŠ” 'ì ˆì—°ì²´'ëŠ” ë¬´ì—‡ì¸ê°€ìš”?", options: ["êµ¬ë¦¬ì„ ", "ì•Œë£¨ë¯¸ëŠ„ ìº”", "ê³ ë¬´ì¥ê°‘", "ëª»"], answer: 2, explanation: "êµ¬ë¦¬, ì•Œë£¨ë¯¸ëŠ„, ëª»ê³¼ ê°™ì€ ê¸ˆì†ì€ ì „ê¸°ê°€ ì˜ í†µí•˜ëŠ” 'ë„ì²´'ì´ê³ , ê³ ë¬´, í”Œë¼ìŠ¤í‹±, ìœ ë¦¬ ë“±ì€ ì „ê¸°ê°€ ì˜ í†µí•˜ì§€ ì•ŠëŠ” 'ì ˆì—°ì²´'ì…ë‹ˆë‹¤." },
            { standard: "6-06-01", question: "ì „ì§€ì™€ ì „êµ¬ë¥¼ ì „ì„ ìœ¼ë¡œ ì—°ê²°í–ˆëŠ”ë° ë¶ˆì´ ì¼œì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ê°€ ë  ìˆ˜ ì—†ëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì „ì§€ê°€ ëª¨ë‘ ë‹³ì•˜ì„ ë•Œ", "ì „ì„ ì˜ ì¤‘ê°„ì´ ëŠì–´ì¡Œì„ ë•Œ", "ì „ì§€ì˜ (+)ê·¹ê³¼ (+)ê·¹ì„ ì—°ê²°í–ˆì„ ë•Œ", "ì „êµ¬ì˜ í•„ë¼ë©˜íŠ¸ê°€ ëŠì–´ì¡Œì„ ë•Œ"], answer: 2, explanation: "ì „ì§€ì˜ (+)ê·¹ê³¼ (+)ê·¹ë¼ë¦¬ ì—°ê²°í•˜ë©´ ì „ë¥˜ê°€ íë¥´ì§€ ì•Šì•„ ë¶ˆì´ ì¼œì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ì „ì§€ê°€ ë‹³ê±°ë‚˜, ì „ì„ /í•„ë¼ë©˜íŠ¸ê°€ ëŠì–´ì ¸ë„ íšŒë¡œê°€ ì™„ì„±ë˜ì§€ ì•Šì•„ ë¶ˆì´ ì¼œì§€ì§€ ì•ŠìŠµë‹ˆë‹¤." },

            // [6ê³¼06-02] ì „ì§€ì˜ ì§ë ¬ì—°ê²°ê³¼ ë³‘ë ¬ì—°ê²° ë¹„êµ (5ë¬¸ì œ)
            { standard: "6-06-02", question: "ì „ì§€ 2ê°œë¥¼ ì§ë ¬ì—°ê²°í–ˆì„ ë•Œ ì „êµ¬ì˜ ë°ê¸°ëŠ” 1ê°œì¼ ë•Œì™€ ë¹„êµí•˜ì—¬ ì–´ë–»ê²Œ ë³€í•˜ë‚˜ìš”?", options: ["ë” ë°ì•„ì§„ë‹¤", "ë” ì–´ë‘ì›Œì§„ë‹¤", "ë°ê¸°ê°€ ê°™ë‹¤", "ë¶ˆì´ ì¼œì§€ì§€ ì•ŠëŠ”ë‹¤"], answer: 0, explanation: "ì „ì§€ë¥¼ ì§ë ¬ì—°ê²°í•˜ë©´ ì „ì••ì´ ë†’ì•„ì ¸ ë” ê°•í•œ ì „ë¥˜ê°€ íë¥´ë¯€ë¡œ ì „êµ¬ê°€ ë” ë°ì•„ì§‘ë‹ˆë‹¤. í•˜ì§€ë§Œ ì „ì§€ëŠ” ë” ë¹¨ë¦¬ ë‹³ìŠµë‹ˆë‹¤." },
            { standard: "6-06-02", question: "ì „ì§€ 2ê°œë¥¼ ë³‘ë ¬ì—°ê²°í–ˆì„ ë•Œì˜ ê°€ì¥ í° ì¥ì ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì „êµ¬ê°€ í›¨ì”¬ ë” ë°ì•„ì§„ë‹¤", "ì „ì§€ë¥¼ ë” ì˜¤ë˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤", "íšŒë¡œë¥¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤", "ë” ë§ì€ ì „êµ¬ë¥¼ ì—°ê²°í•  ìˆ˜ ìˆë‹¤"], answer: 1, explanation: "ì „ì§€ë¥¼ ë³‘ë ¬ì—°ê²°í•˜ë©´ ì „ì••ì€ 1ê°œì¼ ë•Œì™€ ê°™ì•„ ì „êµ¬ ë°ê¸°ëŠ” ë¹„ìŠ·í•˜ì§€ë§Œ, ì „ì§€ë¥¼ ë” ì˜¤ë˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤." },
            { standard: "6-06-02", question: "ê°€ì •ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì „ê¸° ê¸°êµ¬ë“¤ì€ ëŒ€ë¶€ë¶„ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìˆì„ê¹Œìš”?", options: ["ì§ë ¬ì—°ê²°", "ë³‘ë ¬ì—°ê²°", "í˜¼í•©ì—°ê²°", "ì—°ê²° ë°©ì‹ì´ ì •í•´ì ¸ ìˆì§€ ì•Šë‹¤"], answer: 1, explanation: "ê°€ì •ì˜ ì „ê¸° ê¸°êµ¬ë“¤ì€ ë³‘ë ¬ì—°ê²°ë˜ì–´ ìˆì–´ ê°ê°ì˜ ìŠ¤ìœ„ì¹˜ë¡œ ì¼œê³  ëŒ ìˆ˜ ìˆìœ¼ë©°, ì •í•´ì§„ ì „ì••(220V)ì„ ë™ì¼í•˜ê²Œ ê³µê¸‰ë°›ìŠµë‹ˆë‹¤." },
            { standard: "6-06-02", question: "ì§ë ¬ì—°ê²°ëœ ë‘ ê°œì˜ ì „êµ¬ ì¤‘ í•˜ë‚˜ê°€ ëŠì–´ì§€ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?", options: ["ë‚˜ë¨¸ì§€ í•˜ë‚˜ëŠ” ê³„ì† ì¼œì ¸ ìˆë‹¤", "ë‚˜ë¨¸ì§€ í•˜ë‚˜ë„ êº¼ì§„ë‹¤", "ë‚˜ë¨¸ì§€ í•˜ë‚˜ëŠ” ë” ë°ì•„ì§„ë‹¤", "ì•„ë¬´ ë³€í™” ì—†ë‹¤"], answer: 1, explanation: "ì§ë ¬ì—°ê²°ì€ ì „ê¸°ê°€ íë¥´ëŠ” ê¸¸ì´ í•˜ë‚˜ì´ë¯€ë¡œ, ì¤‘ê°„ì— í•œ ì „êµ¬ê°€ ëŠì–´ì§€ë©´ ì „ì²´ íšŒë¡œê°€ ëŠì–´ì ¸ ë‚˜ë¨¸ì§€ ì „êµ¬ë„ ë¶ˆì´ êº¼ì§‘ë‹ˆë‹¤." },
            { standard: "6-06-02", question: "ì†ì „ë“±ì˜ ì „êµ¬ ë°ê¸°ë¥¼ ë” ë°ê²Œ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²•ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì „ì§€ë¥¼ ë³‘ë ¬ë¡œ ì¶”ê°€í•œë‹¤", "ì „ì§€ë¥¼ ì§ë ¬ë¡œ ì¶”ê°€í•œë‹¤", "ë” ê¸´ ì „ì„ ì„ ì‚¬ìš©í•œë‹¤", "ìŠ¤ìœ„ì¹˜ë¥¼ ë” í° ê²ƒìœ¼ë¡œ ë°”ê¾¼ë‹¤"], answer: 1, explanation: "ì „ì§€ë¥¼ ì§ë ¬ë¡œ ì¶”ê°€í•˜ë©´ ì „ì²´ ì „ì••ì´ ë†’ì•„ì ¸ ì „êµ¬ê°€ ë” ë°ì•„ì§‘ë‹ˆë‹¤. ë³‘ë ¬ì—°ê²°ì€ ë°ê¸°ì— í° ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤." },

            // [6ê³¼06-03] ì „ìì„ì˜ ì„±ì§ˆê³¼ ì´ìš© (5ë¬¸ì œ)
            { standard: "6-06-03", question: "ì „ìì„ì„ ë” ê°•í•˜ê²Œ ë§Œë“œëŠ” ë°©ë²•ìœ¼ë¡œ ì˜³ì§€ ì•Šì€ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì „ì§€ì— íë¥´ëŠ” ì „ë¥˜ë¥¼ ì„¸ê²Œ í•œë‹¤", "ì½”ì¼ì„ ë” ë§ì´ ê°ëŠ”ë‹¤", "ì½”ì¼ ì•ˆì— ì² ì‹¬ì„ ë„£ëŠ”ë‹¤", "ì½”ì¼ì„ ë” êµµì€ ê²ƒìœ¼ë¡œ ë°”ê¾¼ë‹¤"], answer: 3, explanation: "ì „ìì„ì˜ ì„¸ê¸°ëŠ” ì „ë¥˜ì˜ ì„¸ê¸°, ì½”ì¼ì˜ ê°ì€ ìˆ˜ì— ë¹„ë¡€í•©ë‹ˆë‹¤. ì½”ì¼ì˜ êµµê¸°ëŠ” ì§ì ‘ì ì¸ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. ì² ì‹¬ì€ ìì„±ì„ ê°•í™”í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤." },
            { standard: "6-06-03", question: "ì „ìì„ì´ ì¼ë°˜ ìì„ê³¼ ë‹¤ë¥¸ ê°€ì¥ í° íŠ¹ì§•ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["í•­ìƒ ì‡ ë¶™ì´ë¥¼ ëŒì–´ë‹¹ê¸´ë‹¤", "Nê·¹ê³¼ Sê·¹ì´ ì—†ë‹¤", "ì „ë¥˜ê°€ íë¥¼ ë•Œë§Œ ìì„ì´ ëœë‹¤", "í”Œë¼ìŠ¤í‹±ë„ ëŒì–´ë‹¹ê¸¸ ìˆ˜ ìˆë‹¤"], answer: 2, explanation: "ì „ìì„ì€ ì „ê¸°ë¥¼ ê³µê¸‰í•  ë•Œë§Œ ìì„ì˜ ì„±ì§ˆì„ ë ê³ , ì „ê¸°ë¥¼ ëŠìœ¼ë©´ ìì„ì˜ ì„±ì§ˆì´ ì‚¬ë¼ì§„ë‹¤ëŠ” ì ì´ ì¼ë°˜ ìì„ê³¼ì˜ ê°€ì¥ í° ì°¨ì´ì ì…ë‹ˆë‹¤." },
            { standard: "6-06-03", question: "ì „ìì„ì— ì—°ê²°ëœ ì „ì§€ì˜ (+)ê·¹ê³¼ (-)ê·¹ì„ ë°”ê¾¸ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?", options: ["ìì„ì˜ ì„¸ê¸°ê°€ ë” ê°•í•´ì§„ë‹¤", "ìì„ì˜ ì„±ì§ˆì´ ì‚¬ë¼ì§„ë‹¤", "ì „ìì„ì˜ Nê·¹ê³¼ Sê·¹ì´ ì„œë¡œ ë°”ë€ë‹¤", "ì•„ë¬´ ë³€í™”ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤"], answer: 2, explanation: "ì „ìì„ì— íë¥´ëŠ” ì „ë¥˜ì˜ ë°©í–¥ì´ ë°”ë€Œë©´ ìê¸°ì¥ì˜ ë°©í–¥ë„ ë°”ë€Œì–´ Nê·¹ê³¼ Sê·¹ì˜ ìœ„ì¹˜ê°€ ì„œë¡œ ë°”ë€Œê²Œ ë©ë‹ˆë‹¤." },
            { standard: "6-06-03", question: "ë‹¤ìŒ ì¤‘ ì „ìì„ì´ ì´ìš©ë˜ëŠ” ì˜ˆë¡œ ê±°ë¦¬ê°€ ë¨¼ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ë¬´ê±°ìš´ ì‡ ë¥¼ ì˜®ê¸°ëŠ” ê¸°ì¤‘ê¸°", "ìŠ¤í”¼ì»¤", "ìê¸° ë¶€ìƒ ì—´ì°¨", "ë‚˜ì¹¨ë°˜"], answer: 3, explanation: "ê¸°ì¤‘ê¸°, ìŠ¤í”¼ì»¤, ìê¸° ë¶€ìƒ ì—´ì°¨, ìë™ë¬¸ ë“±ì€ ì „ìì„ì˜ ì›ë¦¬ë¥¼ ì´ìš©í•©ë‹ˆë‹¤. ë‚˜ì¹¨ë°˜ì€ ì§€êµ¬ì˜ ìê¸°ì¥ì„ ì´ìš©í•˜ëŠ” ì˜êµ¬ ìì„ì…ë‹ˆë‹¤." },
            { standard: "6-06-03", question: "ì „ìì„ì„ ë§Œë“¤ ë•Œ, ì—ë‚˜ë©œì„ ì„ ê°ëŠ” ì² ì‹¬ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["êµ¬ë¦¬ ëª»", "ì•Œë£¨ë¯¸ëŠ„ ë§‰ëŒ€", "ì‡ ëª»", "í”Œë¼ìŠ¤í‹± ë§‰ëŒ€"], answer: 2, explanation: "ì‡ ì™€ ê°™ì´ ìì„±ì´ ì‰½ê²Œ ìƒê¸°ëŠ” ë¬¼ì§ˆì„ ì² ì‹¬ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ ê°•í•œ ì „ìì„ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ¬ë¦¬ë‚˜ ì•Œë£¨ë¯¸ëŠ„, í”Œë¼ìŠ¤í‹±ì€ ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." },
            
            // [6ê³¼06-04] ì „ê¸°ì˜ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ì¸ ì´ìš© (4ë¬¸ì œ)
            { standard: "6-06-04", question: "ì „ê¸°ë¥¼ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì˜³ì§€ ì•Šì€ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì –ì€ ì†ìœ¼ë¡œ ì „ê¸° ê¸°êµ¬ë¥¼ ë§Œì§€ì§€ ì•ŠëŠ”ë‹¤", "í•˜ë‚˜ì˜ ì½˜ì„¼íŠ¸ì— ì—¬ëŸ¬ í”ŒëŸ¬ê·¸ë¥¼ ê½‚ëŠ”ë‹¤", "ì „ì„ ì´ ë²—ê²¨ì§„ ê³³ì€ ì ˆì—° í…Œì´í”„ë¡œ ê°ëŠ”ë‹¤", "ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì „ê¸° ê¸°êµ¬ì˜ í”ŒëŸ¬ê·¸ë¥¼ ë½‘ëŠ”ë‹¤"], answer: 1, explanation: "í•˜ë‚˜ì˜ ì½˜ì„¼íŠ¸ì— ì—¬ëŸ¬ í”ŒëŸ¬ê·¸ë¥¼ ê½‚ìœ¼ë©´ ê³¼ë¶€í•˜ë¡œ ì¸í•´ í™”ì¬ì˜ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ 'ë¬¸ì–´ë°œì‹ ì‚¬ìš©'ì´ë¼ê³  í•˜ë©° ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤." },
            { standard: "6-06-04", question: "ì „ê¸°ë¥¼ ì ˆì•½í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ê°€ì¥ íš¨ê³¼ì ì¸ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["TV ì†Œë¦¬ë¥¼ ì‘ê²Œ ë“£ëŠ”ë‹¤", "ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ì˜ ë¶ˆì„ ëˆë‹¤", "ì»´í“¨í„° í™”ë©´ì„ ì–´ë‘¡ê²Œ í•œë‹¤", "ëƒ‰ì¥ê³  ë¬¸ì„ ìì£¼ ì—¬ë‹«ëŠ”ë‹¤"], answer: 1, explanation: "ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê³µê°„ì˜ ì¡°ëª…ì„ ë„ëŠ” ê²ƒì€ ì§ì ‘ì ìœ¼ë¡œ ì „ë ¥ ì†Œë¹„ë¥¼ ì¤„ì´ëŠ” ë§¤ìš° íš¨ê³¼ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. ëŒ€ê¸°ì „ë ¥ì„ ì¤„ì´ê¸° ìœ„í•´ í”ŒëŸ¬ê·¸ë¥¼ ë½‘ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤." },
            { standard: "6-06-04", question: "ì „ê¸°ê°€ ìš°ë¦¬ ìƒí™œì— ì£¼ëŠ” ì´ì ìœ¼ë¡œ ê°€ì¥ ê±°ë¦¬ê°€ ë¨¼ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ìƒí™œì„ í¸ë¦¬í•˜ê²Œ í•´ì¤€ë‹¤", "ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ì–»ê²Œ í•´ì¤€ë‹¤", "ê³µê¸°ë¥¼ ê¹¨ë—í•˜ê²Œ ì •í™”ì‹œì¼œ ì¤€ë‹¤", "ë°¤ì—ë„ ë°ê²Œ í™œë™í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤"], answer: 2, explanation: "ì „ê¸°ëŠ” ì¡°ëª…, í†µì‹ , ê°€ì „ì œí’ˆ ë“±ì„ í†µí•´ ìš°ë¦¬ ìƒí™œì„ í¸ë¦¬í•˜ê²Œ í•´ì£¼ì§€ë§Œ, ì „ê¸°ë¥¼ ìƒì‚°í•˜ëŠ” ê³¼ì •(íŠ¹íˆ í™”ë ¥ë°œì „)ì€ í™˜ê²½ì˜¤ì—¼ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
            { standard: "6-06-04", question: "ì—ë„ˆì§€ì†Œë¹„íš¨ìœ¨ë“±ê¸‰ ë¼ë²¨ì—ì„œ 1ë“±ê¸‰ì€ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ë‚˜ìš”?", options: ["ì „ê¸°ë¥¼ ê°€ì¥ ë§ì´ ì†Œë¹„í•¨", "ì „ê¸° íš¨ìœ¨ì´ ê°€ì¥ ë†’ì•„ ì ˆì•½ íš¨ê³¼ê°€ í¼", "ì œí’ˆ ê°€ê²©ì´ ê°€ì¥ ë¹„ìŒˆ", "ì œí’ˆ ë””ìì¸ì´ ê°€ì¥ ìš°ìˆ˜í•¨"], answer: 1, explanation: "ì—ë„ˆì§€ì†Œë¹„íš¨ìœ¨ë“±ê¸‰ì€ 1ë“±ê¸‰ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì—ë„ˆì§€ íš¨ìœ¨ì´ ë†’ì•„ ê°™ì€ ê¸°ëŠ¥ì„ í•´ë„ ì „ê¸°ë¥¼ ì ê²Œ ì†Œë¹„í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. 1ë“±ê¸‰ ì œí’ˆì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì „ê¸° ì ˆì•½ì— ë„ì›€ì´ ë©ë‹ˆë‹¤." }
        ];

        // --- 2. ê²Œì„ ìƒíƒœ ê´€ë¦¬ ë³€ìˆ˜ ---
        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        const achievements = {
            '6-06-01': { name: "ì „ê¸° íšŒë¡œì˜ ì´í•´", correct: 0, total: 4, badge: false },
            '6-06-02': { name: "ì „ì§€ì˜ ì—°ê²° ë°©ë²•", correct: 0, total: 5, badge: false },
            '6-06-03': { name: "ì „ìì„ì˜ ì›ë¦¬ì™€ ì´ìš©", correct: 0, total: 5, badge: false },
            '6-06-04': { name: "ì „ê¸°ì˜ ì•ˆì „ê³¼ ì ˆì•½", correct: 0, total: 4, badge: false },
        };

        // --- 3. HTML ìš”ì†Œ ê°€ì ¸ì˜¤ê¸° ---
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultsScreen = document.getElementById('results-screen');
        const progressEl = document.getElementById('progress');
        const standardEl = document.getElementById('achievement-standard');
        const questionEl = document.getElementById('question');
        const optionsContainer = document.getElementById('options-container');
        const explanationEl = document.getElementById('explanation');
        const nextBtn = document.getElementById('next-btn');

        // --- 4. ê²Œì„ í•µì‹¬ ê¸°ëŠ¥ í•¨ìˆ˜ ---
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame() {
            currentQuestionIndex = 0;
            for (const key in achievements) {
                achievements[key].correct = 0;
                achievements[key].badge = false;
            }
            shuffledQuestions = shuffleArray([...allQuestions]);
            startScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            loadQuestion();
        }
        
        function loadQuestion() {
            explanationEl.textContent = "";
            explanationEl.classList.add('hidden');
            nextBtn.classList.add('hidden');

            const questionData = shuffledQuestions[currentQuestionIndex];
            const standardKey = questionData.standard;

            progressEl.textContent = `ë¬¸ì œ ${currentQuestionIndex + 1} / ${shuffledQuestions.length}`;
            standardEl.textContent = `[${achievements[standardKey].name}]`;
            questionEl.textContent = questionData.question;

            optionsContainer.innerHTML = '';
            questionData.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-btn', 'w-full', 'bg-white', 'text-gray-700', 'font-semibold', 'py-3', 'px-4', 'rounded-lg', 'shadow-md', 'border', 'border-gray-200');
                button.onclick = () => handleOptionClick(index);
                optionsContainer.appendChild(button);
            });
        }

        function handleOptionClick(selectedIndex) {
            const questionData = shuffledQuestions[currentQuestionIndex];
            const isCorrect = (selectedIndex === questionData.answer);
            
            Array.from(optionsContainer.children).forEach((btn, index) => {
                btn.disabled = true;
                if (index === questionData.answer) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex) {
                    btn.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                achievements[questionData.standard].correct++;
            }
            
            explanationEl.textContent = "í•´ì„¤: " + questionData.explanation;
            explanationEl.classList.remove('hidden');
            nextBtn.classList.remove('hidden');

            if (currentQuestionIndex >= shuffledQuestions.length - 1) {
                nextBtn.textContent = 'ê²°ê³¼ í™•ì¸í•˜ê¸°';
            }
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }
        
        function showResults() {
            gameScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            const achievementsContainer = document.getElementById('achievements-container');
            achievementsContainer.innerHTML = '';
            let totalCorrect = 0;
            
            for (const key in achievements) {
                const achievement = achievements[key];
                const percentage = (achievement.correct / achievement.total) * 100;
                totalCorrect += achievement.correct;
                
                if (percentage >= 70) {
                    achievement.badge = true;
                }

                const resultEl = document.createElement('div');
                resultEl.className = 'p-4 bg-gray-100 rounded-lg text-left';

                let extraInfoHTML = '';
                if (achievement.badge) {
                    const compliments = ["ì „ê¸° ë°•ì‚¬ë‹˜ì´ë„¤ìš”!", "ê°œë…ì„ ì™„ë²½íˆ ì´í•´í–ˆì–´ìš”!", "ì •ë§ í›Œë¥­í•´ìš”!"];
                    const compliment = compliments[Math.floor(Math.random() * compliments.length)];
                    extraInfoHTML = `<p class="text-sm text-green-600 mt-2 font-semibold">ğŸŒŸ ${compliment}</p>`;
                } else {
                    extraInfoHTML = `<p class="text-sm text-indigo-700 mt-2">ğŸ’¡ <strong>í•™ìŠµ íŒ:</strong> ${tips[key]}</p>`;
                }

                resultEl.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-bold text-gray-800">${achievement.name}</p>
                            <p class="text-sm text-gray-600">ë‹¬ì„±ë„: ${achievement.correct} / ${achievement.total} (${percentage.toFixed(0)}%)</p>
                        </div>
                        <span class="achievement-badge ${achievement.badge ? 'badge-earned' : 'badge-not-earned'}">
                            ${achievement.badge ? 'ğŸ… ë‹¬ì„±' : 'ë¯¸ë‹¬ì„±'}
                        </span>
                    </div>
                    ${extraInfoHTML}
                `;
                achievementsContainer.appendChild(resultEl);
            }
            
            const totalPercentage = (totalCorrect / allQuestions.length) * 100;
            const resultMessage = document.getElementById('result-message');
            if (totalPercentage >= 80) {
                resultMessage.textContent = "í›Œë¥­í•´ìš”! ë‹¹ì‹ ì€ ìµœê³ ì˜ ì „ê¸° íƒí—˜ê°€ì…ë‹ˆë‹¤! ğŸ†";
                resultMessage.className = "font-bold text-xl my-4 text-green-600";
            } else {
                resultMessage.textContent = "ì¡°ê¸ˆ ì•„ì‰½ë„¤ìš”! ë‹¤ì‹œ ë„ì „í•´ì„œ ëª¨ë“  ë°°ì§€ë¥¼ ëª¨ì•„ë³´ì„¸ìš”!";
                resultMessage.className = "font-bold text-xl my-4 text-orange-500";
            }
            
            saveResultToSheet();
        }
        
        async function saveResultToSheet() {
            // ì´ URLì€ Google Apps Scriptë¡œ ì›¹ ì•±ì„ ë°°í¬í•œ í›„ ì–»ëŠ” ì‹¤ì œ URLë¡œ êµì²´í•´ì•¼ í•©ë‹ˆë‹¤.
            const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw.../exec'; 
            if (SCRIPT_URL.includes('...')) return; // URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ

            const totalScore = Object.values(achievements).reduce((sum, ach) => sum + ach.correct, 0);
            const totalProblems = allQuestions.length;
            const dataToSend = {
                // í•™ìƒ ì •ë³´ê°€ ì—†ìœ¼ë¯€ë¡œ ìµëª…ìœ¼ë¡œ ì „ì†¡
                name: "ìµëª…",
                totalScore,
                totalProblems,
                score_01: `${achievements['6-06-01'].correct}/${achievements['6-06-01'].total}`,
                badge_01: achievements['6-06-01'].badge ? 'O' : 'X',
                score_02: `${achievements['6-06-02'].correct}/${achievements['6-06-02'].total}`,
                badge_02: achievements['6-06-02'].badge ? 'O' : 'X',
                score_03: `${achievements['6-06-03'].correct}/${achievements['6-06-03'].total}`,
                badge_03: achievements['6-06-03'].badge ? 'O' : 'X',
                score_04: `${achievements['6-06-04'].correct}/${achievements['6-06-04'].total}`,
                badge_04: achievements['6-06-04'].badge ? 'O' : 'X',
            };
            
            try {
                // Google Sheetsì— ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ì‹¤ì œ ë¡œì§. CORS ì •ì±… ë•Œë¬¸ì— 'no-cors' ëª¨ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                // ì„±ê³µ ì—¬ë¶€ë¥¼ ì§ì ‘ ì•Œ ìˆ˜ëŠ” ì—†ì§€ë§Œ, ë°ì´í„°ëŠ” ì „ì†¡ë©ë‹ˆë‹¤.
                await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors', 
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(dataToSend)
                });
            } catch (error) {
                console.error("ê²°ê³¼ ì €ì¥ ì¤‘ ì—ëŸ¬:", error);
                // alert() ëŒ€ì‹  ì½˜ì†”ì—ë§Œ ë¡œê·¸ë¥¼ ë‚¨ê²¨ ì‚¬ìš©ì ê²½í—˜ì„ í•´ì¹˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            }
        }

        // --- 5. êµìœ¡ì  ë³´ì¡° ê¸°ëŠ¥ í•¨ìˆ˜ ---
        const tips = {
            "6-06-01": "ì „ê¸°ê°€ íë¥´ëŠ” ê¸¸(íšŒë¡œ)ì´ ëŠì–´ì§€ì§€ ì•Šê³  ì´ì–´ì ¸ì•¼ë§Œ ì „êµ¬ì— ë¶ˆì´ ì¼œì§„ë‹¤ëŠ” 'ë‹«íŒ íšŒë¡œ' ê°œë…ì„ ê¸°ì–µí•˜ì„¸ìš”!",
            "6-06-02": "ì§ë ¬ì€ 'íŒŒì›Œ ì—…!', ë³‘ë ¬ì€ 'ì˜¤ë˜ì˜¤ë˜!'ë¡œ ê¸°ì–µí•˜ì„¸ìš”. ì§ë ¬ì€ ë°ê¸°ê°€ ì„¸ì§€ê³ , ë³‘ë ¬ì€ ì‚¬ìš© ì‹œê°„ì´ ê¸¸ì–´ì ¸ìš”.",
            "6-06-03": "ì „ìì„ì€ ì „ê¸°ë¡œ ë§Œë“œëŠ” ìì„ì´ì—ìš”. ì „ê¸°ê°€ íë¥¼ ë•Œë§Œ ìì„ì´ ë˜ê³ , ì „ê¸°ì˜ ë°©í–¥ì„ ë°”ê¾¸ë©´ N/Sê·¹ë„ ë°”ê¿€ ìˆ˜ ìˆë‹µë‹ˆë‹¤.",
            "6-06-04": "ë¬¼ì€ ì „ê¸°ê°€ ì˜ í†µí•´ìš”. ê·¸ë˜ì„œ ì –ì€ ì†ìœ¼ë¡œ ì „ê¸° ê¸°êµ¬ë¥¼ ë§Œì§€ë©´ ê°ì „ ìœ„í—˜ì´ ì»¤ì§€ë‹ˆ í•­ìƒ ì¡°ì‹¬í•´ì•¼ í•´ìš”!"
        };
        
        function showTip() {
            if (currentQuestionIndex >= shuffledQuestions.length) return;
            const currentStandard = shuffledQuestions[currentQuestionIndex].standard;
            document.getElementById('tip-content').textContent = tips[currentStandard];
            const modal = document.getElementById('tip-modal');
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.remove('opacity-0', '-translate-y-4'), 10);
        }

        function closeTip() {
            const modal = document.getElementById('tip-modal');
            modal.classList.add('opacity-0', '-translate-y-4');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        function showElectricityInfo(topic) {
            // alert()ëŠ” ì‚¬ìš©ì ê²½í—˜ì— ë°©í•´ê°€ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, í–¥í›„ì—ëŠ” ëª¨ë‹¬ì°½ìœ¼ë¡œ ê°œì„ í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
            // ì—¬ê¸°ì„œëŠ” ì›ë³¸ ì½”ë“œì˜ í˜•ì‹ì„ ìœ ì§€í•©ë‹ˆë‹¤.
            const infos = {
                circuit: "ğŸ’¡ ì „ê¸° íšŒë¡œ: ì „ì§€, ì „ì„ , ì „êµ¬ê°€ ëŠê¹€ ì—†ì´ ì—°ê²°ë˜ì–´ ì „ê¸°ê°€ íë¥´ëŠ” ê¸¸ì´ì—ìš”.",
                connection: "ğŸ”— ì—°ê²° ë°©ë²•: ì§ë ¬ì€ í•œ ì¤„ë¡œ, ë³‘ë ¬ì€ ì—¬ëŸ¬ ì¤„ë¡œ ì—°ê²°í•˜ëŠ” ë°©ì‹ì´ì—ìš”. ì§‘ ì „ê¸° ë°°ì„ ì€ ë³‘ë ¬ì—°ê²°!",
                electromagnet: "ğŸ§² ì „ìì„: ì „ê¸°ê°€ íë¥¼ ë•Œë§Œ ìì„ì´ ë˜ëŠ” í¸ë¦¬í•œ ìì„! ê¸°ì¤‘ê¸°, ìŠ¤í”¼ì»¤ ë“±ì— ì‚¬ìš©ë¼ìš”.",
                safety: "ğŸ”Œ ì•ˆì „: ë¬¼ê¸° ì¡°ì‹¬! ë¬¸ì–´ë°œ ì‚¬ìš© ê¸ˆì§€! ì „ê¸°ëŠ” í¸ë¦¬í•˜ì§€ë§Œ í•­ìƒ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•´ìš”."
            };
            
            const message = infos[topic];
            // alert ëŒ€ì‹  ì»¤ìŠ¤í…€ ëª¨ë‹¬ì´ë‚˜ ë‹¤ë¥¸ UI ìš”ì†Œë¡œ ëŒ€ì²´í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
            // ì—¬ê¸°ì„œëŠ” ì¼ë‹¨ ë¹„í™œì„±í™” í•©ë‹ˆë‹¤. í•„ìš”ì‹œ ì£¼ì„ì„ í•´ì œí•˜ì„¸ìš”.
             alert(message);
        }

        // --- 6. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²° ---
        document.getElementById('start-game-btn').addEventListener('click', startGame);
        nextBtn.addEventListener('click', nextQuestion);
        document.getElementById('restart-btn').addEventListener('click', () => {
            resultsScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            // 'ë‹¤ìŒ ë¬¸ì œ' ë²„íŠ¼ í…ìŠ¤íŠ¸ ì´ˆê¸°í™”
            nextBtn.textContent = 'ë‹¤ìŒ ë¬¸ì œ';
        });

    </script>
</body>
</html>
